---
title: "LDATS Rodents Example"
author: "Juniper L. Simonis"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r, include=FALSE}
library(LDATS)
vers <- packageVersion("LDATS")
today <- Sys.Date()
```

This vignette walks through an example of **LDATS** at the command line and
was constructed using **LDATS** version `r vers` on `r today`.


## Installation

To obtain the most recent version of **LDATS**, install the most recent 
version from GitHub:

```{r, eval=FALSE}
install.packages("devtools")
devtools::install_github("weecology/LDATS")
```

## Data

For this vignette, we will be using rodent data from the control plots of the
[Portal Project](https://github.com/weecology/portaldata), which come with
the **LDATS** package.

```{r}
data(rodents)
```

`rodents` contains two elements. The `document_term_table` is a table of species (terms) abundances x sampling period:

```{r}
head(rodents$document_term_table, 10)
```

The `document_covariate_table` is a table of `newmoons`, or timesteps, and their corresponding covariate values, in this case `sin_year` and `cos_year`.

```{r}
head(rodents$document_covariate_table, 10)
```


## Full model using `LDA_TS`

* LDA_TS using defaults

```{r}

full_ldats <- LDA_TS(rodents[[1]], rodents[[2]], topics = 2, nseeds = 2, formulas = ~1, nchangepoints = 2, weights = document_weights(rodents[[1]]))

plot(full_ldats)

```

* explore arguments, change controls lists
* rerun with new settings

## Running component models individually
